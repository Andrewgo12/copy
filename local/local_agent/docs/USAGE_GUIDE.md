# Gu√≠a de Uso Completa

## Inicio R√°pido

### Ejecuci√≥n B√°sica
```bash
# Activar entorno virtual
source venv/bin/activate  # Linux/macOS
# o
venv\Scripts\activate     # Windows

# Iniciar sesi√≥n interactiva
python main.py

# O usar CLI directamente
python -m local_agent.interfaces.cli interactive
```

### Primera Interacci√≥n
```
Usuario: Hola, ¬øqu√© puedes hacer?

Agente: ¬°Hola! Soy tu agente local de IA. Puedo ayudarte con:

üóÇÔ∏è **Gesti√≥n de Archivos**
- Leer, escribir y organizar archivos
- Analizar c√≥digo fuente
- Buscar contenido en directorios

‚öôÔ∏è **Comandos del Sistema**
- Ejecutar comandos de terminal de forma segura
- Instalar paquetes y dependencias
- Gestionar repositorios Git

üåê **B√∫squeda Web**
- Buscar informaci√≥n en internet
- Obtener contenido de p√°ginas web
- Investigar documentaci√≥n t√©cnica

üß† **Memoria y Aprendizaje**
- Recordar conversaciones anteriores
- Aprender tus preferencias
- Mantener contexto de proyectos

¬øEn qu√© te gustar√≠a que te ayude?
```

## Casos de Uso Detallados

### 1. Desarrollo de Software

#### An√°lisis de C√≥digo Existente
```
Usuario: Analiza el archivo main.py y dime qu√© hace

Agente: 
üìã **Plan de An√°lisis:**
1. Leer archivo main.py
2. Analizar estructura del c√≥digo
3. Identificar funciones y clases principales
4. Evaluar complejidad y posibles mejoras

üîç **An√°lisis Completado:**

El archivo main.py contiene:
- Funci√≥n principal `main()` que inicializa el agente
- Configuraci√≥n de logging con loguru
- Manejo de variables de entorno
- Gesti√≥n de errores con try/catch

**Estructura detectada:**
- 85 l√≠neas de c√≥digo
- 3 funciones principales
- 1 clase de configuraci√≥n
- Imports de 8 m√≥dulos

**Recomendaciones:**
- A√±adir docstrings a las funciones
- Considerar separar configuraci√≥n en archivo aparte
- A√±adir tests unitarios
```

#### Creaci√≥n de Nuevas Funciones
```
Usuario: Crea una funci√≥n para validar emails en Python

Agente:
üìù **Creando funci√≥n de validaci√≥n de emails...**

```python
import re
from typing import bool

def validate_email(email: str) -> bool:
    """
    Valida si una direcci√≥n de email tiene formato correcto
    
    Args:
        email: Direcci√≥n de email a validar
        
    Returns:
        True si el email es v√°lido, False en caso contrario
        
    Examples:
        >>> validate_email("usuario@ejemplo.com")
        True
        >>> validate_email("email_invalido")
        False
    """
    if not email or not isinstance(email, str):
        return False
    
    # Patr√≥n regex para validaci√≥n b√°sica de email
    pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
    
    return bool(re.match(pattern, email.strip()))


# Tests unitarios
def test_validate_email():
    """Tests para la funci√≥n validate_email"""
    # Casos v√°lidos
    assert validate_email("test@example.com") == True
    assert validate_email("user.name@domain.co.uk") == True
    assert validate_email("user+tag@example.org") == True
    
    # Casos inv√°lidos
    assert validate_email("invalid_email") == False
    assert validate_email("@example.com") == False
    assert validate_email("test@") == False
    assert validate_email("") == False
    assert validate_email(None) == False

if __name__ == "__main__":
    test_validate_email()
    print("‚úÖ Todos los tests pasaron")
```

¬øTe gustar√≠a que guarde esta funci√≥n en un archivo espec√≠fico?
```

#### Refactoring de C√≥digo
```
Usuario: Refactoriza la funci√≥n process_data() para que sea m√°s eficiente

Agente:
üîç **Analizando funci√≥n actual...**

He identificado las siguientes optimizaciones:

**Problemas encontrados:**
- Loop anidado innecesario (O(n¬≤) ‚Üí O(n))
- M√∫ltiples llamadas a la misma funci√≥n
- Variables no utilizadas
- Falta manejo de errores

**Versi√≥n optimizada:**

```python
# ANTES (ineficiente)
def process_data(data_list):
    results = []
    for item in data_list:
        for other_item in data_list:  # ‚ùå Loop innecesario
            if expensive_function(item) == expensive_function(other_item):  # ‚ùå Llamadas duplicadas
                results.append(transform_item(item))
    return results

# DESPU√âS (optimizada)
def process_data(data_list):
    """
    Procesa lista de datos de forma eficiente
    Complejidad: O(n) en lugar de O(n¬≤)
    """
    if not data_list:
        return []
    
    results = []
    processed_values = {}  # Cache para evitar rec√°lculos
    
    try:
        for item in data_list:
            # Usar cache para evitar llamadas duplicadas
            if item not in processed_values:
                processed_values[item] = expensive_function(item)
            
            value = processed_values[item]
            
            # Procesar solo si cumple condici√≥n
            if value is not None:
                transformed = transform_item(item)
                results.append(transformed)
                
    except Exception as e:
        logger.error(f"Error procesando datos: {e}")
        raise
    
    return results
```

**Mejoras implementadas:**
- ‚úÖ Eliminado loop anidado innecesario
- ‚úÖ Cache para evitar rec√°lculos
- ‚úÖ Manejo de errores robusto
- ‚úÖ Validaci√≥n de entrada
- ‚úÖ Documentaci√≥n a√±adida

**Ganancia de rendimiento estimada:** 80-90% m√°s r√°pido para listas grandes
```

### 2. Automatizaci√≥n de Tareas

#### Gesti√≥n de Proyectos
```
Usuario: Crea un nuevo proyecto Python con estructura est√°ndar

Agente:
üèóÔ∏è **Creando estructura de proyecto Python...**

üìã **Plan de Ejecuci√≥n:**
1. Crear directorio del proyecto
2. Inicializar estructura de carpetas
3. Crear archivos de configuraci√≥n
4. Configurar entorno virtual
5. Crear archivos de ejemplo

‚úÖ **Proyecto creado exitosamente:**

```
mi_proyecto/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ test_main.py
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ setup.py
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ pyproject.toml
```

**Archivos creados:**
- ‚úÖ Estructura de directorios est√°ndar
- ‚úÖ requirements.txt con dependencias b√°sicas
- ‚úÖ setup.py para instalaci√≥n
- ‚úÖ .gitignore para Python
- ‚úÖ Tests unitarios de ejemplo
- ‚úÖ Documentaci√≥n inicial

**Pr√≥ximos pasos sugeridos:**
1. `cd mi_proyecto`
2. `python -m venv venv`
3. `source venv/bin/activate`
4. `pip install -r requirements.txt`
```

#### Automatizaci√≥n DevOps
```
Usuario: Verifica el estado del repositorio, ejecuta tests y haz commit si todo est√° bien

Agente:
üîÑ **Ejecutando workflow DevOps...**

**Paso 1: Verificaci√≥n del repositorio**
```bash
$ git status
On branch main
Your branch is up to date with 'origin/main'.

Changes not staged for commit:
  modified:   src/main.py
  modified:   tests/test_main.py

Untracked files:
  new_feature.py
```

**Paso 2: Ejecutando tests**
```bash
$ python -m pytest tests/ -v
========================= test session starts =========================
tests/test_main.py::test_basic_functionality PASSED    [ 50%]
tests/test_main.py::test_edge_cases PASSED             [100%]

========================= 2 passed in 0.15s =========================
```

**Paso 3: An√°lisis de calidad de c√≥digo**
```bash
$ flake8 src/
src/main.py:45:80: E501 line too long (85 > 79 characters)

$ black src/ --check
would reformat src/main.py
```

**Paso 4: Correcciones autom√°ticas**
- ‚úÖ L√≠neas largas corregidas
- ‚úÖ Formato de c√≥digo aplicado
- ‚úÖ Tests ejecutados nuevamente: PASSED

**Paso 5: Commit autom√°tico**
```bash
$ git add .
$ git commit -m "feat: add new feature with tests and formatting fixes"
[main 7a8b9c2] feat: add new feature with tests and formatting fixes
 3 files changed, 45 insertions(+), 12 deletions(-)
```

‚úÖ **Workflow completado exitosamente**
- Tests: ‚úÖ Pasaron
- Calidad: ‚úÖ Corregida
- Commit: ‚úÖ Realizado
- Estado: Listo para push
```

### 3. Investigaci√≥n y Aprendizaje

#### B√∫squeda de Informaci√≥n T√©cnica
```
Usuario: Busca informaci√≥n sobre FastAPI y crea un ejemplo b√°sico

Agente:
üîç **Investigando FastAPI...**

**Informaci√≥n encontrada:**
FastAPI es un framework web moderno y r√°pido para construir APIs con Python 3.7+, basado en type hints est√°ndar de Python.

**Caracter√≠sticas principales:**
- ‚ö° Muy r√°pido: rendimiento comparable a NodeJS y Go
- üöÄ R√°pido de codificar: aumenta la velocidad de desarrollo entre 200% y 300%
- üêõ Menos bugs: reduce aproximadamente 40% de errores humanos
- üß† Intuitivo: gran soporte del editor con autocompletado
- üìù Autom√°tico: documentaci√≥n API interactiva autom√°tica

**Ejemplo b√°sico creado:**

```python
# main.py - API b√°sica con FastAPI
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel
from typing import List, Optional

# Crear instancia de FastAPI
app = FastAPI(
    title="Mi API con FastAPI",
    description="API de ejemplo creada por el agente local",
    version="1.0.0"
)

# Modelo de datos
class Item(BaseModel):
    id: Optional[int] = None
    name: str
    description: Optional[str] = None
    price: float
    tax: Optional[float] = None

# Base de datos simulada
items_db = []

# Endpoints
@app.get("/")
async def root():
    """Endpoint ra√≠z"""
    return {"message": "¬°Hola desde FastAPI!"}

@app.get("/items/", response_model=List[Item])
async def read_items():
    """Obtener todos los items"""
    return items_db

@app.get("/items/{item_id}", response_model=Item)
async def read_item(item_id: int):
    """Obtener item por ID"""
    for item in items_db:
        if item.id == item_id:
            return item
    raise HTTPException(status_code=404, detail="Item no encontrado")

@app.post("/items/", response_model=Item)
async def create_item(item: Item):
    """Crear nuevo item"""
    item.id = len(items_db) + 1
    items_db.append(item)
    return item

@app.put("/items/{item_id}", response_model=Item)
async def update_item(item_id: int, item: Item):
    """Actualizar item existente"""
    for i, existing_item in enumerate(items_db):
        if existing_item.id == item_id:
            item.id = item_id
            items_db[i] = item
            return item
    raise HTTPException(status_code=404, detail="Item no encontrado")

@app.delete("/items/{item_id}")
async def delete_item(item_id: int):
    """Eliminar item"""
    for i, item in enumerate(items_db):
        if item.id == item_id:
            del items_db[i]
            return {"message": "Item eliminado"}
    raise HTTPException(status_code=404, detail="Item no encontrado")

# Ejecutar con: uvicorn main:app --reload
```

**Para ejecutar:**
```bash
# Instalar FastAPI
pip install fastapi uvicorn

# Ejecutar servidor
uvicorn main:app --reload

# Acceder a:
# - API: http://localhost:8000
# - Documentaci√≥n: http://localhost:8000/docs
# - Redoc: http://localhost:8000/redoc
```

**Archivos adicionales creados:**
- ‚úÖ requirements.txt actualizado
- ‚úÖ Dockerfile para containerizaci√≥n
- ‚úÖ Tests unitarios b√°sicos
- ‚úÖ Documentaci√≥n en README.md
```

### 4. An√°lisis de Datos

#### Procesamiento de CSV
```
Usuario: Analiza el archivo datos.csv y genera un reporte

Agente:
üìä **Analizando archivo datos.csv...**

**Informaci√≥n del archivo:**
- Tama√±o: 2.3 MB
- Filas: 15,847
- Columnas: 8
- Formato: CSV con separador coma

**Estructura detectada:**
```
Columna          Tipo      Valores √önicos    Nulos
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
id               int       15,847            0
nombre           string    12,456            23
edad             int       78                5
salario          float     8,234             156
departamento     string    12                0
fecha_ingreso    date      2,847             8
activo           bool      2                 0
puntuacion       float     1,247             89
```

**Estad√≠sticas Descriptivas:**

**Edad:**
- Media: 34.2 a√±os
- Mediana: 33.0 a√±os
- Desviaci√≥n est√°ndar: 8.7
- Rango: 22-65 a√±os

**Salario:**
- Media: $67,450
- Mediana: $65,200
- Q1: $52,000, Q3: $78,500
- Outliers detectados: 23 casos

**An√°lisis por Departamento:**
```
Departamento     Empleados    Salario Promedio    Edad Promedio
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Ingenier√≠a       4,234        $78,900            32.1
Marketing        2,156        $58,700            35.8
Ventas           3,789        $62,300            36.2
RRHH             1,245        $55,400            38.9
Finanzas         2,134        $71,200            34.5
```

**Insights Clave:**
- üìà Ingenier√≠a tiene los salarios m√°s altos
- üë• Ventas es el departamento m√°s grande
- üìÖ Pico de contrataciones en 2019-2020
- ‚ö†Ô∏è 23 outliers en salarios requieren revisi√≥n

**Archivos generados:**
- ‚úÖ reporte_analisis.html
- ‚úÖ graficos_estadisticas.png
- ‚úÖ datos_limpios.csv
- ‚úÖ resumen_ejecutivo.pdf
```

### 5. Gesti√≥n de Configuraciones

#### Setup de Entorno de Desarrollo
```
Usuario: Configura un entorno de desarrollo completo para React

Agente:
‚öôÔ∏è **Configurando entorno React...**

**Paso 1: Verificaci√≥n de prerequisitos**
```bash
$ node --version
v18.17.0 ‚úÖ

$ npm --version  
9.6.7 ‚úÖ
```

**Paso 2: Creaci√≥n del proyecto**
```bash
$ npx create-react-app mi-app-react --template typescript
Creating a new React app in /current/path/mi-app-react...
‚úÖ Proyecto creado exitosamente
```

**Paso 3: Instalaci√≥n de dependencias adicionales**
```bash
$ cd mi-app-react
$ npm install @mui/material @emotion/react @emotion/styled
$ npm install axios react-router-dom
$ npm install -D @testing-library/jest-dom @testing-library/react
‚úÖ Dependencias instaladas
```

**Paso 4: Configuraci√≥n de herramientas de desarrollo**
```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

**Paso 5: Scripts personalizados a√±adidos**
```json
// package.json (scripts a√±adidos)
{
  "scripts": {
    "dev": "react-scripts start",
    "build": "react-scripts build", 
    "test": "react-scripts test",
    "test:coverage": "react-scripts test --coverage --watchAll=false",
    "lint": "eslint src/**/*.{js,jsx,ts,tsx}",
    "lint:fix": "eslint src/**/*.{js,jsx,ts,tsx} --fix",
    "format": "prettier --write src/**/*.{js,jsx,ts,tsx,css,md}"
  }
}
```

**Paso 6: Componente de ejemplo creado**
```typescript
// src/components/Welcome.tsx
import React from 'react';
import { Button, Typography, Container } from '@mui/material';

interface WelcomeProps {
  userName?: string;
}

const Welcome: React.FC<WelcomeProps> = ({ userName = 'Usuario' }) => {
  const handleClick = () => {
    alert(`¬°Hola ${userName}! Bienvenido a tu nueva app React.`);
  };

  return (
    <Container maxWidth="sm" sx={{ textAlign: 'center', mt: 4 }}>
      <Typography variant="h3" component="h1" gutterBottom>
        üöÄ ¬°Proyecto React Listo!
      </Typography>
      
      <Typography variant="body1" sx={{ mb: 3 }}>
        Tu entorno de desarrollo est√° configurado y listo para usar.
      </Typography>
      
      <Button 
        variant="contained" 
        color="primary" 
        onClick={handleClick}
        size="large"
      >
        Comenzar a Desarrollar
      </Button>
    </Container>
  );
};

export default Welcome;
```

**‚úÖ Entorno completamente configurado:**
- React 18 con TypeScript
- Material-UI para componentes
- ESLint y Prettier configurados
- Tests con Jest y Testing Library
- Scripts de desarrollo optimizados
- Estructura de carpetas est√°ndar

**Para iniciar desarrollo:**
```bash
cd mi-app-react
npm run dev
```

**URLs importantes:**
- Aplicaci√≥n: http://localhost:3000
- Documentaci√≥n: http://localhost:3000/docs (si a√±ades Storybook)
```

## Comandos Especiales del CLI

### Comandos de Informaci√≥n
```bash
# Ver estado del agente
status

# Listar herramientas disponibles
tools

# Ver resumen de memoria
memory

# Ver configuraci√≥n actual
config

# Ver logs recientes
logs

# Ver estad√≠sticas de uso
stats
```

### Comandos de Gesti√≥n
```bash
# Limpiar sesi√≥n actual
clear

# Reiniciar agente
restart

# Exportar conversaci√≥n
export conversation.json

# Importar configuraci√≥n
import config.yml

# Backup de memoria
backup memory_backup.json

# Restaurar memoria
restore memory_backup.json
```

### Comandos de Desarrollo
```bash
# Modo debug
debug on

# Recargar herramientas
reload tools

# Test de herramientas
test tools

# Validar configuraci√≥n
validate config

# Generar documentaci√≥n
generate docs
```

## Personalizaci√≥n Avanzada

### Crear Herramientas Personalizadas

```python
# tools/custom/mi_herramienta.py
from local_agent.tools.base import BaseTool, ToolDefinition, ToolParameter, ToolCategory, RiskLevel

class MiHerramientaPersonalizada(BaseTool):
    """Ejemplo de herramienta personalizada"""
    
    def get_definition(self) -> ToolDefinition:
        return ToolDefinition(
            name="mi_herramienta",
            description="Hace algo espec√≠fico para mi workflow",
            category=ToolCategory.CUSTOM,
            risk_level=RiskLevel.LOW,
            parameters=[
                ToolParameter(
                    name="input_data",
                    type="string",
                    description="Datos de entrada",
                    required=True
                )
            ],
            examples=[{"input_data": "ejemplo"}]
        )
    
    async def execute(self, parameters):
        # Tu l√≥gica personalizada aqu√≠
        input_data = parameters["input_data"]
        
        # Procesar datos...
        result = f"Procesado: {input_data}"
        
        return {
            "success": True,
            "result": result,
            "error": None,
            "metadata": {"processed_at": time.time()}
        }
```

### Configurar Prompts Personalizados

```python
# config/custom_prompts.py
CUSTOM_PROMPTS = {
    "planning": """
    Eres un planificador experto especializado en {domain}.
    
    Contexto del usuario: {user_context}
    Preferencias: {user_preferences}
    
    Crea un plan detallado considerando:
    - Mejores pr√°cticas de {domain}
    - Eficiencia y seguridad
    - Preferencias del usuario
    
    Solicitud: {user_request}
    """,
    
    "code_review": """
    Act√∫a como un senior developer experto en {language}.
    
    Revisa el siguiente c√≥digo y proporciona:
    1. An√°lisis de calidad
    2. Sugerencias de mejora
    3. Posibles bugs o problemas
    4. Optimizaciones de rendimiento
    
    C√≥digo a revisar:
    {code}
    """
}
```

## Integraci√≥n con IDEs

### VS Code Extension (Futuro)
```json
// .vscode/settings.json
{
  "local-agent.enabled": true,
  "local-agent.apiUrl": "http://localhost:8000",
  "local-agent.autoSuggest": true,
  "local-agent.confirmDangerous": true
}
```

### Comandos de VS Code
- `Ctrl+Shift+P` ‚Üí "Local Agent: Analyze Current File"
- `Ctrl+Shift+P` ‚Üí "Local Agent: Generate Tests"
- `Ctrl+Shift+P` ‚Üí "Local Agent: Refactor Selection"
- `Ctrl+Shift+P` ‚Üí "Local Agent: Explain Code"

## Mejores Pr√°cticas

### Seguridad
1. **Siempre revisar** acciones que modifican archivos del sistema
2. **Usar sandbox** para comandos desconocidos
3. **Configurar guardrails** espec√≠ficos para tu entorno
4. **Hacer backups** regulares de la memoria del agente

### Rendimiento
1. **Limitar contexto** para consultas simples
2. **Usar cach√©** para operaciones repetitivas
3. **Configurar timeouts** apropiados
4. **Monitorear uso** de recursos

### Mantenimiento
1. **Actualizar dependencias** regularmente
2. **Limpiar memoria** antigua peri√≥dicamente
3. **Revisar logs** para detectar problemas
4. **Hacer backups** antes de cambios importantes
